<% content_for :title, "D√©monstration Vue Dynamic Mounting" %>

<div class="row mb-4">
  <div class="col">
    <h1>üéØ Syst√®me de Montage Dynamique Vue.js</h1>
    <p class="lead">
      Cette page d√©montre comment monter plusieurs applications Vue dynamiquement
      via des <code>data-behavior</code> attributes.
    </p>
  </div>
</div>

<div class="row mb-4">
  <div class="col-md-6 mb-3">
    <h3>Composant Counter (par d√©faut)</h3>
    <div data-behavior="vue-counter"></div>
  </div>

  <div class="col-md-6 mb-3">
    <h3>Counter avec props personnalis√©es</h3>
    <div
      data-behavior="vue-counter"
      data-title="Mon compteur personnalis√©"
      data-initial-count="10"
    ></div>
  </div>
</div>

<div class="row mb-4">
  <div class="col-md-6 mb-3">
    <h3>Composant Greeting</h3>
    <div
      data-behavior="vue-greeting"
      data-name="Jean Dupont"
      data-message="Ceci est un message personnalis√© pass√© via data-attributes !"
    ></div>
  </div>

  <div class="col-md-6 mb-3">
    <h3>Greeting avec valeurs par d√©faut</h3>
    <div data-behavior="vue-greeting"></div>
  </div>
</div>

<div class="row mb-4">
  <div class="col-md-8 mb-3">
    <h3>Composant TodoList</h3>
    <div
      data-behavior="vue-todo-list"
      data-title="Mes t√¢ches du jour"
      data-initial-todos='["Cr√©er le syst√®me de montage dynamique", "Tester avec plusieurs composants", "D√©ployer en production"]'
    ></div>
  </div>

  <div class="col-md-4 mb-3">
    <h3>TodoList vide</h3>
    <div
      data-behavior="vue-todo-list"
      data-title="Liste vide"
    ></div>
  </div>
</div>

<div class="row mb-4">
  <div class="col">
    <div class="card bg-light">
      <div class="card-body">
        <h4 class="card-title">üî• Test de montage dynamique</h4>
        <p class="card-text">
          Cliquez sur le bouton ci-dessous pour ajouter dynamiquement
          un nouveau composant Vue √† la page. Le syst√®me d√©tectera automatiquement
          le nouvel √©l√©ment et montera l'application !
        </p>
        <button class="btn btn-success" onclick="addDynamicComponent()">
          ‚ûï Ajouter un composant dynamiquement
        </button>
        <div id="dynamic-container" class="mt-3"></div>
      </div>
    </div>
  </div>
</div>

<div class="row mb-4">
  <div class="col">
    <div class="card border-info">
      <div class="card-header bg-info text-white">
        <h5 class="mb-0">üìñ Comment √ßa marche ?</h5>
      </div>
      <div class="card-body">
        <h6>1. Ajouter un composant dans votre HTML :</h6>
        <pre class="bg-dark text-light p-3 rounded"><code>&lt;div data-behavior="vue-counter"&gt;&lt;/div&gt;</code></pre>

        <h6 class="mt-3">2. Passer des props via data-attributes :</h6>
        <pre class="bg-dark text-light p-3 rounded"><code>&lt;div
  data-behavior="vue-greeting"
  data-name="Jean"
  data-message="Bonjour !"
&gt;&lt;/div&gt;</code></pre>

        <h6 class="mt-3">3. Types support√©s :</h6>
        <ul>
          <li><strong>String :</strong> <code>data-name="Jean"</code></li>
          <li><strong>Number :</strong> <code>data-count="42"</code></li>
          <li><strong>Boolean :</strong> <code>data-active="true"</code></li>
          <li><strong>Array/Object (JSON) :</strong> <code>data-items='["a", "b", "c"]'</code></li>
        </ul>

        <h6 class="mt-3">4. Montage automatique :</h6>
        <p>
          Le syst√®me utilise un <code>MutationObserver</code> pour d√©tecter
          automatiquement les nouveaux √©l√©ments ajout√©s au DOM, m√™me via JavaScript
          ou AJAX. Aucune action manuelle n√©cessaire !
        </p>
      </div>
    </div>
  </div>
</div>

<script>
  let dynamicCounter = 0;

  function addDynamicComponent() {
    dynamicCounter++;
    const container = document.getElementById('dynamic-container');

    const newElement = document.createElement('div');
    newElement.className = 'mb-3';
    newElement.innerHTML = `
      <div class="alert alert-success">
        <strong>Composant #${dynamicCounter} ajout√© dynamiquement !</strong>
      </div>
      <div
        data-behavior="vue-counter"
        data-title="Compteur dynamique #${dynamicCounter}"
        data-initial-count="${dynamicCounter * 5}"
      ></div>
    `;

    container.appendChild(newElement);
  }
</script>
