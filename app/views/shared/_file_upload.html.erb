<%# Partial pour upload de fichier avec drag & drop
  Usage:
    <%= render "shared/file_upload",
               form: f,
               field: :attachment,
               label: "Fichier",
               accept: "image/*",
               max_size: 10.megabytes %>
%>

<%
  field ||= :attachment
  label ||= "Fichier"
  accept ||= "image/*,application/pdf"
  max_size ||= 10.megabytes
  help_text ||= "Glissez-dÃ©posez un fichier ou cliquez pour parcourir (max #{number_to_human_size(max_size)})"
%>

<div data-controller="file-upload"
     data-file-upload-max-size-value="<%= max_size %>"
     data-file-upload-accept-value="<%= accept %>">

  <label class="form-label"><%= label %></label>

  <%# Hidden file input %>
  <%= form.file_field field,
                      class: "d-none",
                      accept: accept,
                      data: {
                        file_upload_target: "input",
                        action: "change->file-upload#change"
                      } %>

  <%# Dropzone area %>
  <div class="border border-2 border-dashed rounded p-4 text-center"
       style="cursor: pointer; transition: all 0.3s;"
       data-file-upload-target="dropzone"
       data-action="click->file-upload#triggerInput">
    <div class="mb-3" style="font-size: 3rem;">ğŸ“</div>
    <div class="fw-bold mb-2"><%= label %></div>
    <div class="text-muted small"><%= help_text %></div>
  </div>

  <%# Preview area (hidden by default) %>
  <div class="mt-3 d-none" data-file-upload-target="preview"></div>

  <%# File name display (optional) %>
  <div class="mt-2 text-muted small d-none" data-file-upload-target="fileName"></div>
</div>
